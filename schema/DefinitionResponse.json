{
  "$defs": {
    "DefinitionRequest": {
      "description": "Finds the definition, declaration, or type definition of a symbol.\n\nUse this to jump to the actual source code where a symbol is defined,\nits declaration site, or the definition of its type/class.",
      "properties": {
        "locate": {
          "$ref": "#/$defs/Locate"
        },
        "mode": {
          "default": "definition",
          "enum": [
            "definition",
            "declaration",
            "type_definition"
          ],
          "title": "Mode",
          "type": "string"
        }
      },
      "required": [
        "locate"
      ],
      "title": "DefinitionRequest",
      "type": "object"
    },
    "LineScope": {
      "description": "Scope by line range",
      "properties": {
        "line": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "maxItems": 2,
              "minItems": 2,
              "prefixItems": [
                {
                  "type": "integer"
                },
                {
                  "type": "integer"
                }
              ],
              "type": "array"
            }
          ],
          "title": "Line"
        }
      },
      "required": [
        "line"
      ],
      "title": "LineScope",
      "type": "object"
    },
    "Locate": {
      "description": "Two-stage location: scope \u2192 find.\n\nResolution rules:\n    1. SymbolScope without find: symbol declaration position (for references, rename)\n    2. With find containing marker: marker position\n    3. With find only: start of matched text\n    4. No scope + find: search entire file\n\nMarker Detection:\n    The marker is automatically detected using nested bracket notation:\n    - <|> (single level)\n    - <<|>> (double level) if <|> appears more than once\n    ... and so on\n\n    The marker with the deepest nesting level that appears exactly once\n    is chosen as the position marker.\n\nExamples:\n    # Symbol declaration\n    Locate(file_path=\"foo.py\", scope=SymbolScope(symbol_path=[\"MyClass\"]))\n\n    # Completion trigger point - basic marker\n    Locate(file_path=\"foo.py\", find=\"self.<|>\")\n\n    # When <|> exists in source, use deeper nesting\n    Locate(file_path=\"foo.py\", find=\"x = <|> + y <<|>> z\")\n    # Will use <<|>> as the position marker\n\n    # Specific location in function\n    Locate(\n        file_path=\"foo.py\",\n        scope=SymbolScope(symbol_path=[\"process\"]),\n        find=\"return <|>result\"\n    )",
      "properties": {
        "file_path": {
          "format": "path",
          "title": "File Path",
          "type": "string"
        },
        "scope": {
          "anyOf": [
            {
              "$ref": "#/$defs/LineScope"
            },
            {
              "$ref": "#/$defs/SymbolScope"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Scope"
        },
        "find": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "title": "Find"
        }
      },
      "required": [
        "file_path",
        "find"
      ],
      "title": "Locate",
      "type": "object"
    },
    "Position": {
      "description": "Represents a specific position in a file using line and character numbers.\n\nNote: Line and character are 1-based indices. 0-based indices are used in LSP, so conversion is needed when interfacing with LSP.",
      "properties": {
        "line": {
          "minimum": 1,
          "title": "Line",
          "type": "integer"
        },
        "character": {
          "minimum": 1,
          "title": "Character",
          "type": "integer"
        }
      },
      "required": [
        "line",
        "character"
      ],
      "title": "Position",
      "type": "object"
    },
    "Range": {
      "properties": {
        "start": {
          "$ref": "#/$defs/Position"
        },
        "end": {
          "$ref": "#/$defs/Position"
        }
      },
      "required": [
        "start",
        "end"
      ],
      "title": "Range",
      "type": "object"
    },
    "SymbolCodeInfo": {
      "properties": {
        "file_path": {
          "format": "path",
          "title": "File Path",
          "type": "string"
        },
        "name": {
          "title": "Name",
          "type": "string"
        },
        "path": {
          "items": {
            "type": "string"
          },
          "title": "Path",
          "type": "array"
        },
        "kind": {
          "$ref": "#/$defs/SymbolKind"
        },
        "range": {
          "anyOf": [
            {
              "$ref": "#/$defs/Range"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "code": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Code"
        }
      },
      "required": [
        "file_path",
        "name",
        "path",
        "kind"
      ],
      "title": "SymbolCodeInfo",
      "type": "object"
    },
    "SymbolKind": {
      "enum": [
        "file",
        "module",
        "namespace",
        "package",
        "class",
        "method",
        "property",
        "field",
        "constructor",
        "enum",
        "interface",
        "function",
        "variable",
        "constant",
        "string",
        "number",
        "boolean",
        "array",
        "object",
        "key",
        "null",
        "enumMember",
        "struct",
        "event",
        "operator",
        "typeParameter"
      ],
      "title": "SymbolKind",
      "type": "string"
    },
    "SymbolScope": {
      "description": "Scope by symbol, also serves as declaration locator when find is omitted",
      "properties": {
        "symbol_path": {
          "items": {
            "type": "string"
          },
          "title": "Symbol Path",
          "type": "array"
        }
      },
      "required": [
        "symbol_path"
      ],
      "title": "SymbolScope",
      "type": "object"
    }
  },
  "markdown": "\n# {{ request.mode | replace: \"_\", \" \" | capitalize }} Result\n\n{% if items.size == 0 -%}\nNo {{ request.mode | replace: \"_\", \" \" }} found.\n{%- else -%}\n{%- for item in items -%}\n## `{{ item.file_path }}`: {{ item.path | join: \".\" }} (`{{ item.kind }}`)\n\n{% if item.code != nil -%}\n### Content\n```{{ item.file_path.suffix | remove_first: \".\" }}\n{{ item.code }}\n```\n{%- endif %}\n\n{% endfor -%}\n{%- endif %}\n",
  "properties": {
    "request": {
      "$ref": "#/$defs/DefinitionRequest"
    },
    "items": {
      "items": {
        "$ref": "#/$defs/SymbolCodeInfo"
      },
      "title": "Items",
      "type": "array"
    }
  },
  "required": [
    "request",
    "items"
  ],
  "title": "DefinitionResponse",
  "type": "object"
}
