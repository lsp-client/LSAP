import { z } from "zod";

export const SearchResponse = z.object({ "start_index": z.number().int(), "max_items": z.union([z.number().int(), z.null()]).default(null), "total": z.union([z.number().int(), z.null()]).default(null), "has_more": z.boolean().default(false), "pagination_id": z.union([z.string(), z.null()]).default(null), "request": z.object({ "max_items": z.union([z.number().int(), z.null()]).default(null), "start_index": z.number().int().default(0), "pagination_id": z.union([z.string(), z.null()]).default(null), "query": z.string(), "kinds": z.union([z.array(z.enum(["file","module","namespace","package","class","method","property","field","constructor","enum","interface","function","variable","constant","string","number","boolean","array","object","key","null","enumMember","struct","event","operator","typeParameter"])), z.null()]).default(null) }).describe("Searches for symbols across the workspace by name pattern.\n\nReturns concise results for quick discovery. Use SymbolRequest\nto get detailed information about a specific symbol."), "items": z.array(z.object({ "name": z.string(), "kind": z.enum(["file","module","namespace","package","class","method","property","field","constructor","enum","interface","function","variable","constant","string","number","boolean","array","object","key","null","enumMember","struct","event","operator","typeParameter"]), "file_path": z.string(), "line": z.union([z.number().int(), z.null()]).default(null), "container": z.union([z.string(), z.null()]).default(null) }).describe("Concise search result for quick discovery.")) });

export const SearchResponseTemplates = {
  "markdown": "\n# Search: `{{ request.query }}`\n{% if total != nil -%}\nFound {{ total }} results{% if max_items != nil %} (showing {{ items.size }}){% endif %}\n{%- endif %}\n\n{% if items.size == 0 -%}\nNo matches found.\n{%- else -%}\n{%- for item in items %}\n- `{{ item.name }}` ({{ item.kind }}): `{{ item.file_path }}{% if item.line != nil %}:{{ item.line }}{% endif %}`{% if item.container != nil %} (in `{{ item.container }}`){% endif %}\n{%- endfor %}\n\n{% if has_more -%}\n> More results available. Use `start_index={{ start_index | plus: items.size }}` for next page.\n{%- endif %}\n{%- endif %}\n"
} as const;
