import { z } from "zod";

export const WorkspaceDiagnosticsResponse = z.object({ "start_index": z.number().int(), "max_items": z.union([z.number().int(), z.null()]).default(null), "total": z.union([z.number().int(), z.null()]).default(null), "has_more": z.boolean().default(false), "pagination_id": z.union([z.string(), z.null()]).default(null), "items": z.array(z.object({ "range": z.object({ "start": z.object({ "line": z.number().int().gte(1), "character": z.number().int().gte(1) }).describe("Represents a specific position in a file using line and character numbers.\n\nNote: Line and character are 1-based indices. 0-based indices are used in LSP, so conversion is needed when interfacing with LSP."), "end": z.object({ "line": z.number().int().gte(1), "character": z.number().int().gte(1) }).describe("Represents a specific position in a file using line and character numbers.\n\nNote: Line and character are 1-based indices. 0-based indices are used in LSP, so conversion is needed when interfacing with LSP.") }), "severity": z.enum(["Error","Warning","Information","Hint"]), "message": z.string(), "source": z.union([z.string(), z.null()]).default(null), "code": z.union([z.string(), z.number().int(), z.null()]).default(null), "file_path": z.string() })) });

export const WorkspaceDiagnosticsResponseTemplates = {
  "markdown": "\n# Workspace Diagnostics\n{% if total != nil -%}\nTotal issues: {{ total }} | Showing: {{ items.size }}{% if max_items != nil %} (Offset: {{ start_index }}, Limit: {{ max_items }}){% endif %}\n{%- endif %}\n\n{% if items.size == 0 -%}\nNo issues found in the workspace.\n{%- else -%}\n| File | Line:Col | Severity | Message |\n| :--- | :--- | :--- | :--- |\n{%- for item in items %}\n| `{{ item.file_path }}` | {{ item.range.start.line }}:{{ item.range.start.character }} | {{ item.severity }} | {{ item.message }} |\n{%- endfor %}\n\n{% if has_more -%}\n---\n> [!TIP]\n> More issues available.\n{%- if pagination_id != nil %}\n> Use `pagination_id=\"{{ pagination_id }}\"` to fetch the next page.\n{%- else %}\n> To see the rest, specify a `max_items` and use: `start_index={% assign step = max_items | default: items.size %}{{ start_index | plus: step }}`\n{%- endif %}\n{%- endif %}\n{%- endif %}\n"
} as const;
