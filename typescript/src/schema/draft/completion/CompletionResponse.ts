import { z } from "zod";

export const CompletionResponse = z.object({ "start_index": z.number().int(), "max_items": z.union([z.number().int(), z.null()]).default(null), "total": z.union([z.number().int(), z.null()]).default(null), "has_more": z.boolean().default(false), "pagination_id": z.union([z.string(), z.null()]).default(null), "items": z.array(z.object({ "label": z.string(), "kind": z.string(), "detail": z.union([z.string(), z.null()]).default(null), "documentation": z.union([z.string(), z.null()]).default(null), "insert_text": z.union([z.string(), z.null()]).default(null) })) });

export const CompletionResponseTemplates = {
  "markdown": "\n# Code Completion\n\n{% if items.size == 0 -%}\nNo completion suggestions found.\n{%- else -%}\n{% if items[0].documentation != nil %}\n## Top Suggestion Detail: `{{ items[0].label }}`\n{{ items[0].documentation }}\n{% endif %}\n\n{%- for item in items %}\n### {{ forloop.index }}. `{{ item.label }}` ({{ item.kind }})\n{%- if item.detail %}\n- Detail: {{ item.detail }}\n{%- endif %}\n{%- if item.insert_text and item.insert_text != item.label %}\n- Insert: `{{ item.insert_text }}`\n{%- endif %}\n{%- if item.documentation %}\n- Doc: {{ item.documentation | truncate: 300 }}\n{%- endif %}\n{%- endfor %}\n\n{% if has_more -%}\n---\n> [!TIP]\n{%- if pagination_id != nil %}\n> Use `pagination_id=\"{{ pagination_id }}\"` to fetch more suggestions.\n{%- else %}\n> More results available. Use `start_index` to fetch more.\n{%- endif %}\n{%- endif %}\n\n---\n> [!TIP]\n> Use these symbols to construct your next code edit. You can focus on a specific method to get more details.\n{%- endif %}\n"
} as const;
