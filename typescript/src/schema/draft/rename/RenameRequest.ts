import { z } from "zod";

export const RenameRequest = z.object({ "locate": z.object({ "file_path": z.string(), "scope": z.union([z.object({ "line": z.union([z.number().int(), z.array(z.any()).min(2).max(2)]) }).describe("Scope by line range"), z.object({ "symbol_path": z.array(z.string()) }).describe("Scope by symbol, also serves as declaration locator when find is omitted"), z.null()]).default(null), "find": z.union([z.string(), z.null()]).default(null), "marker": z.string().default("<HERE>") }).describe("Two-stage location: scope â†’ find.\n\nResolution rules:\n    1. SymbolScope without find: symbol declaration position (for references, rename)\n    2. With find containing marker: marker position\n    3. With find only: start of matched text\n    4. No scope + find: search entire file\n\nExamples:\n    # Symbol declaration\n    Locate(file_path=\"foo.py\", scope=SymbolScope(symbol_path=[\"MyClass\"]))\n\n    # Completion trigger point\n    Locate(file_path=\"foo.py\", find=\"self.<HERE>\")\n\n    # When source contains \"<HERE>\", use custom marker\n    Locate(file_path=\"foo.py\", find=\"x = <|>value\", marker=\"<|>\")\n\n    # Specific location in function\n    Locate(\n        file_path=\"foo.py\",\n        scope=SymbolScope(symbol_path=[\"process\"]),\n        find=\"return <HERE>result\"\n    )"), "max_items": z.union([z.number().int().gte(1), z.null()]).default(100), "start_index": z.number().int().default(0), "pagination_id": z.union([z.string(), z.null()]).default(null), "new_name": z.string(), "show_diffs": z.boolean().default(false) }).describe("Previews a workspace-wide symbol rename operation.\n\nThis API returns a preview of all changes that would be made by renaming\nthe specified symbol. The preview is generated from LSP's WorkspaceEdit,\nwhich contains all the text edits needed for the rename. The actual\nexecution of changes is handled by the client (editor/IDE) using the\nsame WorkspaceEdit.\n\nBy default, returns a compact summary to minimize token usage.\nUse show_diffs=true to see detailed line-by-line changes extracted\nfrom the WorkspaceEdit.\n\nNote: LSP rename is always workspace-wide. All references to the symbol\nacross all files will be included in the preview.");
