import { z } from "zod";

export const RenameResponse = z.object({ "start_index": z.number().int(), "max_items": z.union([z.number().int(), z.null()]).default(null), "total": z.union([z.number().int(), z.null()]).default(null), "has_more": z.boolean().default(false), "pagination_id": z.union([z.string(), z.null()]).default(null), "old_name": z.string(), "new_name": z.string(), "total_occurrences": z.number().int(), "changes": z.array(z.object({ "file_path": z.string(), "occurrences": z.number().int(), "diffs": z.array(z.object({ "line": z.number().int(), "original": z.string(), "modified": z.string() })).optional() })) });

export const RenameResponseTemplates = {
  "markdown": "\n# Rename Preview: `{{ old_name }}` â†’ `{{ new_name }}`\n\n## Summary\n- **Files affected**: {{ total }}{% if has_more or start_index > 0 %} (showing {{ changes | size }}/{{ total }}){% endif %}\n- **Total occurrences**: {{ total_occurrences }}\n\n## Affected Files\n{%- for file in changes %}\n- `{{ file.file_path }}`: {{ file.occurrences }} occurrence(s)\n{%- endfor %}\n{%- if has_more %}\n- ... and more file(s) available.\n{%- endif %}\n\n{%- if changes.size > 0 -%}\n{%- assign first_file = changes[0] -%}\n{%- if first_file.diffs.size > 0 %}\n\n## Detailed Changes\n{%- for file in changes %}\n\n### `{{ file.file_path }}`\n{%- for diff in file.diffs %}\n- Line {{ diff.line }}:\n  - `{{ diff.original }}`\n  + `{{ diff.modified }}`\n{%- endfor %}\n{%- endfor %}\n{%- endif %}\n{%- endif %}\n\n{%- if has_more %}\n\n---\n> [!TIP]\n> More changes available. To see more, use: `start_index={{ start_index | plus: max_items }}`\n{%- endif %}\n\n---\n> [!NOTE]\n> This is a preview of changes. The actual rename operation will be executed by your editor/IDE.\n> Review the changes above before applying them.\n"
} as const;
