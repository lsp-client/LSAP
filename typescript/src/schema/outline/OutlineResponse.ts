import { z } from "zod";

export const OutlineResponse = z.object({ "file_path": z.string(), "items": z.array(z.object({ "file_path": z.string(), "name": z.string(), "path": z.array(z.string()), "kind": z.enum(["file","module","namespace","package","class","method","property","field","constructor","enum","interface","function","variable","constant","string","number","boolean","array","object","key","null","enumMember","struct","event","operator","typeParameter"]), "range": z.union([z.object({ "start": z.object({ "line": z.number().int().gte(1), "character": z.number().int().gte(1) }).describe("Represents a specific position in a file using line and character numbers.\n\nNote: Line and character are 1-based indices. 0-based indices are used in LSP, so conversion is needed when interfacing with LSP."), "end": z.object({ "line": z.number().int().gte(1), "character": z.number().int().gte(1) }).describe("Represents a specific position in a file using line and character numbers.\n\nNote: Line and character are 1-based indices. 0-based indices are used in LSP, so conversion is needed when interfacing with LSP.") }), z.null()]).default(null), "detail": z.union([z.string(), z.null()]).default(null), "hover": z.union([z.string(), z.null()]).default(null) })) });

export const OutlineResponseTemplates = {
  "markdown": "\n# Outline for `{{ file_path }}`\n\n{% for item in items -%}\n{% assign level = item.path | size | plus: 1 -%}\n{% for i in (1..level) %}#{% endfor %} {{ item.path | join: \".\" }} (`{{ item.kind }}`)\n{% if item.detail != nil %}{{ item.detail }}{% endif %}\n{% if item.hover != nil %}{{ item.hover | strip | truncate: 120 }}{% endif %}\n\n{% endfor -%}\n"
} as const;
